<!DOCTYPE html>
<html>
	<head>
	
	<link href="//gmpg.org/xfn/11" rel="profile">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<link rel="canonical" href="http://camporez.com/blog/tpb2rss-openshift" />
	<meta name="description" content="A small tutorial on how to generate feed based on thepiratebay.se searches using TPB2RSS (a.k.a. my new python project)" />
	<meta property="og:description" content="A small tutorial on how to generate feed based on thepiratebay.se searches using TPB2RSS (a.k.a. my new python project)" />
	<meta itemprop="image" content="http://camporez.com/media/2014-07-08-tpb2rss-openshift/cover.jpg" />
	<meta property="og:image" content="http://camporez.com/media/2014-07-08-tpb2rss-openshift/cover.jpg" />
	<meta property="og:title" content="Using TPB2RSS with OpenShift" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="http://camporez.com/blog/tpb2rss-openshift" />
	<meta property="og:site_name" content="Camporez" />
	<title>Using TPB2RSS with OpenShift &middot; Camporez</title>
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" type="text/css" media="only screen and (min-width: 900px)" href="/assets/css/desktop.css" />
	<link rel="stylesheet" type="text/css" media="only screen and (max-width: 899px)" href="/assets/css/mobile.css" />
	<link href="/assets/css/genericons.css" type="text/css" rel="stylesheet" />
	<link href="/assets/css/syntax.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fenix:400,400italic">
	<link rel="apple-touch-icon" href="http://camporez.com/assets/images/icon2.png">
	<link rel="shortcut icon" href="http://camporez.com/assets/images/favicon.ico">
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://camporez.com/atom.xml">
	<meta name="google-site-verification" content="dxHJfJrwqWqaCiGZcfJ6xGM5n15rRRgS6ae699FLo3w" />	
	<script type="text/javascript" src="/assets/js/jquery-2.1.0.min.js"></script>
	<script type="text/javascript" src="/assets/js/jquery.stellar.min.js"></script>
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-48981004-1', 'camporez.com');
	  ga('send', 'pageview');
	</script>
</head>

	<body>
		<header class="clean" style="background-image: url(/media/2014-07-08-tpb2rss-openshift/cover.jpg); height: 100%;" data-stellar-background-ratio="0.5" data-stellar-horizontal-offset="50">
	
	<label class="menu" for="_1">
	<span class="genericon genericon-menu"></span>
</label>
<input id="_1" type="checkbox">
<div class="menu-content">
	<p class="menu-title">Camporez<p>
	<div class="menu" style="background-color: #1a1a1a; z-index: -1;"></div>
	
		<a href="/">Início</a>
	
		<a href="/sobre">Sobre</a>
	
	<hr>
	
		<a href="https://twitter.com/iancamporez" class="social-links-menu" target="_blank" title="Siga-me no twitter"><span class="genericon genericon-twitter"></span></a>
	
		<a href="https://github.com/camporez" class="social-links-menu" target="_blank" title="Acesse meu github"><span class="genericon genericon-github"></span></a>
	
		<a href="https://google.com/+IanCamporezBrunelli" class="social-links-menu" target="_blank" title="Me adicione ao google+"><span class="genericon genericon-googleplus-alt"></span></a>
	
		<a href="http://camporez.com/atom.xml" class="social-links-menu" target="_blank" title="Inscreva-se no meu feed"><span class="genericon genericon-feed"></span></a>
	
</div>
<div class="social-links" data-stellar-ratio="0.1">
	
		<a href="https://twitter.com/iancamporez" target="_blank" title="Siga-me no twitter"><span class="genericon genericon-twitter"></span></a>
	
		<a href="https://github.com/camporez" target="_blank" title="Acesse meu github"><span class="genericon genericon-github"></span></a>
	
		<a href="https://google.com/+IanCamporezBrunelli" target="_blank" title="Me adicione ao google+"><span class="genericon genericon-googleplus-alt"></span></a>
	
		<a href="http://camporez.com/atom.xml" target="_blank" title="Inscreva-se no meu feed"><span class="genericon genericon-feed"></span></a>
	
</div>

	<div id="post-info" data-stellar-ratio="0.7">
		<h1>Using TPB2RSS with OpenShift</h1>
		
			<h2>A small tutorial on how to generate feed based on thepiratebay.se searches using TPB2RSS (a.k.a. my new python project)</h2>
		
		<a class="site-title" href="http://camporez.com"><div class="site-icon-small" style="background-image: url(/assets/images/icon2.png);"></div>Camporez</a>, em 8 de julho de 2014
	</div>
	
	<div id="img-info" data-stellar-ratio="0.5">
		<a href="http://mitahav.deviantart.com/art/pirate-bay-in-code-245603343" target="_blank" title="Fonte da imagem"><span class="genericon genericon-link"></span></a>
	</div>
	
	<div id="nav-icon" style="bottom: 30px;" data-stellar-ratio="0.5">
		<a class="scroll" data-speed="500" href="#article"><span class="genericon genericon-expand"></span></a>
	</div>
</header>
<div id="middle">
	<div id="article">
		<p>Hello, everybody! Nice to see you here…</p>

<p>Well, you may not know, but I was working on a “The Pirate Bay search” to “RSS feed” converter on the last couple of days.</p>

<p>It is a really simple script that, given a search term, a TPB link or a local saved TPB page, returns (by default printing on the screen) a xml containing the feed (following <a href="http://cyber.law.harvard.edu/rss/rss.html">the specifications of RSS 2.0</a>).</p>

<p>I won’t give more details of the functioning or the functionality of this script in here. You can <a href="https://github.com/camporez/tpb2rss/blob/master/tpb2rss.py">take a look at the source code</a> and ask any question <a href="https://github.com/camporez/tpb2rss/issues">in the issues page</a>, <a href="http://twitter.com/iancamporez">Twitter</a>/<a href="http://google.com/+IanCamporezBrunelli">Google+</a> or in the comments’ section below.</p>

<p>Before I start the tutorial, you’ve to know that there’re inumerous ways to create the feed generator on OpenShift, but in this tutorial I’ll approach two of them:</p>

<ul>
  <li>The first one, runs a cron task to update the RSS. Any RSS is created based on the content of a file placed inside your OpenShift installation. Therefore, you’ll have to SSH to your application and edit this file to add/remove new feeds.</li>
  <li>The second one is a web-based service. To create a new feed you just need to open your application main page and insert the link in there, or open a search/user/browse page in thepirate bay and replace the main url to YOUR_OPENSHIFT_URL.</li>
</ul>

<p>From now on, I will call the first method “<strong>private</strong>” and the second “<strong>public</strong>”, so a command indicating “public method only” has to be executed only if you’re following the second method, and vice-versa.</p>

<p>Let’s get started with the tutorial…</p>

<h1 id="installing-on-openshift">Installing on OpenShift</h1>

<h2 id="creating-the-application">Creating the application</h2>

<p>Create a <a href="https://openshift.redhat.com/app/console/application_type/cart!python-2.7">Python 2.7 application on OpenShift</a>, then, if you’re following the <strong>private</strong> method, add the Cron cartridge. Clone the application to your computer.</p>

<p>Now, you’ll edit the file <code>setup.py</code> to include <a href="http://www.crummy.com/software/BeautifulSoup/">the Beautiful Soup 4 library</a> on your installation. Uncomment the line <code>install_requires</code> and add <code>beautifulsoup4</code> to it. The line will look like this:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;beautifulsoup4&#39;</span><span class="p">],</span></code></pre></div>

<p>After edit this file, it’s time to place TPB2RSS’ files. Browse to your repository’s root and run the following commands:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>git clone https://github.com/camporez/tpb2rss.git tpb2rss
<span class="nv">$ </span>mv tpb2rss/tpb2rss.py .
<span class="nv">$ </span>mv tpb2rss/openshift/*.py . <span class="c"># Public method only</span>
<span class="nv">$ </span>mv tpb2rss/openshift/cron/ .openshift/ <span class="c"># Private method only</span>
<span class="nv">$ </span>mkdir -p wsgi/static<span class="p">;</span> touch wsgi/static/example.xml <span class="c"># Private method only</span>
<span class="nv">$ </span>rm -rf tpb2rss</code></pre></div>

<p>Commit and push the changes. I won’t describe how to use Git/OpenShift, as good tutorials can be easily found.</p>

<h2 id="finishing-the-installation">Finishing the installation</h2>

<p>If you’re following the “<strong>private</strong>” method, SSH to your application and create this file, directory and link:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>touch <span class="s2">&quot;$OPENSHIFT_DATA_DIR/searches&quot;</span>
<span class="nv">$ </span>mkdir <span class="s2">&quot;$OPENSHIFT_DATA_DIR/raw&quot;</span>
<span class="nv">$ </span>ln -s <span class="s2">&quot;$OPENSHIFT_REPO_DIR/wsgi/static&quot;</span> <span class="s2">&quot;$OPENSHIFT_DATA_DIR/static&quot;</span></code></pre></div>

<h2 id="managing-the-feeds">Managing the feeds</h2>

<p>TPB2RSS is probably running, if you followed all the steps correctly.</p>

<p>If you’re following the “<strong>private</strong>” method, you can create new feeds by editing the file <code>$OPENSHIFT_DATA_DIR/searches</code>. SSH to your application and edit this file with your favorite text editor.</p>

<p>Each line of this file represents a search term that will generate a XML file in <code>$OPENSHIFT_DATA_DIR/static</code>.</p>

<p>This file is available online by the URL <code>http://YOUR_OPENSHIFT_URL/static/SEARCH_STRING.xml</code>, and will look like this:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;rss</span> <span class="na">version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
	<span class="nt">&lt;channel&gt;</span>
		<span class="nt">&lt;title&gt;</span>TPB2RSS: Under The Dome S02 !720p [eztv]<span class="nt">&lt;/title&gt;</span>
		<span class="nt">&lt;link&gt;</span>http://thepiratebay.org/search/Under%20The%20Dome%20S02%20!720p%20[eztv]/0/3/0<span class="nt">&lt;/link&gt;</span>
		<span class="nt">&lt;description&gt;</span>The Pirate Bay search feed for &quot;Under The Dome S02 !720p [eztv]&quot;<span class="nt">&lt;/description&gt;</span>
		<span class="nt">&lt;lastBuildDate&gt;</span>Wed, 09 Jul 2014 01:22:20 GMT<span class="nt">&lt;/lastBuildDate&gt;</span>
		<span class="nt">&lt;language&gt;</span>en-us<span class="nt">&lt;/language&gt;</span>
		<span class="nt">&lt;generator&gt;</span>TPB2RSS 1.0<span class="nt">&lt;/generator&gt;</span>
		<span class="nt">&lt;docs&gt;</span>http://github.com/camporez/tpb2rss<span class="nt">&lt;/docs&gt;</span>
		<span class="nt">&lt;webMaster&gt;</span>ian@camporez.com<span class="nt">&lt;/webMaster&gt;</span>
			<span class="nt">&lt;item&gt;</span>
				<span class="nt">&lt;title&gt;</span>Under the Dome S02E02 HDTV x264-LOL [eztv]<span class="nt">&lt;/title&gt;</span>
				<span class="nt">&lt;link&gt;</span><span class="cp">&lt;![CDATA[ magnet:?xt=urn:btih:9759f086c714589f9d75ad04800cf99ce2bd9b19&amp;amp;dn=Under+the+Dome+S02E02+HDTV+x264-LOL+%5Beztv%5D&amp;amp;tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&amp;amp;tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&amp;amp;tr=udp%3A%2F%2Ftracker.istole.it%3A6969&amp;amp;tr=udp%3A%2F%2Fopen.demonii.com%3A1337 ]]&gt;</span><span class="nt">&lt;/link&gt;</span>
				<span class="nt">&lt;pubDate&gt;</span>Tue, 08 Jul 2014 07:24:00 GMT<span class="nt">&lt;/pubDate&gt;</span>
				<span class="nt">&lt;description&gt;</span>![CDATA[ Link: https://thepiratebay.org/torrent/10507825/Under_the_Dome_S02E02_HDTV_x264-LOL_[eztv]<span class="nt">&lt;br&gt;</span>Uploader: eztv<span class="nt">&lt;br&gt;</span>Size: 269.91 MiB<span class="nt">&lt;br&gt;</span>Seeders: 7546<span class="nt">&lt;br&gt;</span>Leechers: 1339 ]]&gt;<span class="nt">&lt;/description&gt;</span>
			<span class="nt">&lt;/item&gt;</span>
			<span class="nt">&lt;item&gt;</span>
				<span class="nt">&lt;title&gt;</span>Under the Dome S02E01 HDTV x264-LOL [eztv]<span class="nt">&lt;/title&gt;</span>
				<span class="nt">&lt;link&gt;</span><span class="cp">&lt;![CDATA[ magnet:?xt=urn:btih:97b265826f18f6183d12257d26d7948092c43bb0&amp;amp;dn=Under+the+Dome+S02E01+HDTV+x264-LOL+%5Beztv%5D&amp;amp;tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&amp;amp;tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&amp;amp;tr=udp%3A%2F%2Ftracker.istole.it%3A6969&amp;amp;tr=udp%3A%2F%2Fopen.demonii.com%3A1337 ]]&gt;</span><span class="nt">&lt;/link&gt;</span>
				<span class="nt">&lt;pubDate&gt;</span>Tue, 01 Jul 2014 04:34:00 GMT<span class="nt">&lt;/pubDate&gt;</span>
				<span class="nt">&lt;description&gt;</span>![CDATA[ Link: https://thepiratebay.org/torrent/10465762/Under_the_Dome_S02E01_HDTV_x264-LOL_[eztv]<span class="nt">&lt;br&gt;</span>Uploader: eztv<span class="nt">&lt;br&gt;</span>Size: 376.38 MiB<span class="nt">&lt;br&gt;</span>Seeders: 7443<span class="nt">&lt;br&gt;</span>Leechers: 684 ]]&gt;<span class="nt">&lt;/description&gt;</span>
			<span class="nt">&lt;/item&gt;</span>
	<span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span></code></pre></div>

<p>If you’re following the “<strong>public</strong>” method, just browse to <code>http://YOUR_OPENSHIFT_URL</code> to generate a new feed URL. The content of this URL will look like the above XML.</p>

<p>You can add this URL to your feed client, torrent client (µTorrent, for example, <a href="http://www.utorrent.com/intl/en/help/guides/rss">supports RSS</a>), <a href="https://ifttt.com">IFTTT</a> (to receive a notification when a new item arrives, like in the screenshot below) or any other RSS-tool.</p>

<div id="article-img"><a href="/media/2014-07-08-tpb2rss-openshift/Captura de tela de 2014-07-09 09:15:56.png" target="_blank"><img src="/media/2014-07-08-tpb2rss-openshift/Captura de tela de 2014-07-09 09:15:56.png" alt="If a new Halt and Catch Fire episode is uploaded (in WEB-DL and 720p), then send me a note using Pushbullet." width="100%" /></a>
<blockquote style="border-left: 10px solid #D5D5D5;">If a new Halt and Catch Fire episode is uploaded (in WEB-DL and 720p), then send me a note using Pushbullet.</blockquote></div>

<p>This is it! If you’ve found any issue with this tutorial, please comment below.</p>

	</div>
	
	<div id="comments">
		
	
	<script src="https://apis.google.com/js/plusone.js"></script>
	<div id="g-comments" class="g-comments" data-href="http://camporez.com/blog/tpb2rss-openshift" data-width="700" data-first_party_property="BLOGGER" data-view_type="FILTERED_POSTMOD"></div>
	<script>
		var width = $('#comments').width() * 0.9;
		width = Math.round(width);
		$("#g-comments").attr({ "data-width": width });
	</script>


	</div>
	
</div>

	
		
		
		
		
		
		
	

<footer class="clean" style="background-image: url(/media/2014-02-27-hello-cosette/cover.jpg); height: 75%; min-height: 500px;" data-stellar-background-ratio="0.5" data-stellar-horizontal-offset="50" data-stellar-vertical-offset="50">
	<div id="nav-icon" style="top: 60px;" data-stellar-ratio="0.8">
		<a class="scroll" data-speed="500" href="#article"><span class="genericon genericon-collapse"></span></a>
	</div>
	<div id="post-info" data-stellar-ratio="0.5" data-stellar-vertical-offset="120">
		<h3>Em destaque</h3>
		<a href="/blog/hello-cosette">
			<h1>Hello, Cosette</h1>
			
				<h2>Thinny reaches a new version, with mobile support and some other cool features.</h2>
			
		</a>
	</div>
	<p class="copyright">&copy;2014, <a href="http://camporez.com" target="_blank">Camporez</a>. <a href="http://creativecommons.org/licenses/by-nc/2.5/br" target="_blank">Alguns direitos reservados</a>.</p>
</footer>
<script src="/assets/js/smooth-scroll.js"></script>

		<script>
		var width = $(window).width()
		if ( width > 899 )
		$( function(){
		    $.stellar({
			verticalScrolling: true,
			horizontalOffset: 0,
			verticalOffset: 0,
			positionProperty: 'transform',
			responsive: true
		    });
		});
		</script>
	</body>
</html>
